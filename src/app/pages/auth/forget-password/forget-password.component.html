<section class="bg">
    <div class="form-container">
        <!-- Logo -->
        <div class="logo-img">
            <img src="assets/logo/fourdotz-logo.png" alt="Logo" />
        </div>

        <!-- Forget Password Form -->
        <form class="signin-form" [formGroup]="forgetForm">
            <!-- Email -->
            <div class="inp-cont email-inp">
                <label class="medium-font" for="email">Email <span class="required">*</span></label>
                <div class="email-row">
                    <input type="email" id="email" formControlName="email" placeholder="Enter your registered email"
                        class="inp-cus regular-font" />
                    <button type="button" class="btn-add-otp" (click)="sendOtp()"
                        [disabled]="forgetForm.get('email')?.invalid || loadingOtp">
                        {{ loadingOtp ? 'Sending...' : 'Send OTP' }}
                    </button>
                </div>

                <div class="error regular-font" *ngIf="forgetForm.get('email')?.touched && forgetForm.get('email')?.invalid">
                    <small *ngIf="forgetForm.get('email')?.errors?.['required']" class="error-text">Email is
                        required.</small>
                    <small *ngIf="forgetForm.get('email')?.errors?.['email']" class="error-text">Enter a valid email
                        address.</small>
                </div>
            </div>

            <!-- OTP Field -->
            <div class="inp-cont password-group">
                <label class="medium-font" for="otp">Enter OTP <span class="required">*</span></label>
                <input type="text" id="otp" placeholder="Enter OTP" formControlName="otp" class="inp-cus regular-font" />

                <div class="error regular-font" *ngIf="forgetForm.get('otp')?.touched && forgetForm.get('otp')?.invalid">
                    <small *ngIf="forgetForm.get('otp')?.errors?.['required']" class="error-text">OTP is
                        required.</small>
                    <small *ngIf="forgetForm.get('otp')?.errors?.['minlength']" class="error-text">OTP must be at least
                        4 digits.</small>
                </div>
            </div>

            <!-- New Password (Shown only after OTP sent successfully) -->
            <div class="inp-cont password-group" *ngIf="showPasswordField">
                <label class="medium-font" for="newPassword">New Password <span class="required">*</span></label>
                <input type="text" id="newPassword" placeholder="Enter your new password"
                    formControlName="newPassword" class="inp-cus" />

                <div class="error"
                    *ngIf="forgetForm.get('newPassword')?.touched && forgetForm.get('newPassword')?.invalid">
                    <small *ngIf="forgetForm.get('newPassword')?.errors?.['required']" class="error-text">Password is
                        required.</small>
                    <small *ngIf="forgetForm.get('newPassword')?.errors?.['minlength']" class="error-text">
                        Password must be at least 6 characters.
                    </small>
                </div>
            </div>

            <!-- Footer Buttons -->
            <div class="btn-group">
                <button type="button" class="btn-back" (click)="goBack()">Back</button>
                <button type="button" class="btn-add" (click)="submit()"
                    [disabled]="forgetForm.invalid || loadingSubmit">
                    {{ loadingSubmit ? 'Processing...' : 'Submit' }}
                </button>
            </div>
        </form>
    </div>
</section>
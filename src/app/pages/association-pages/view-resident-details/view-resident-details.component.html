<section>
    <div class="back-button-div">
        <!-- From Uiverse.io by karthik092726122003 -->
        <button (click)="goback()" class="back-button">
            <svg height="16" width="16" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024">
                <path
                    d="M874.690416 495.52477c0 11.2973-9.168824 20.466124-20.466124 20.466124l-604.773963 0 188.083679 188.083679c7.992021 7.992021 7.992021 20.947078 0 28.939099-4.001127 3.990894-9.240455 5.996574-14.46955 5.996574-5.239328 0-10.478655-1.995447-14.479783-5.996574l-223.00912-223.00912c-3.837398-3.837398-5.996574-9.046027-5.996574-14.46955 0-5.433756 2.159176-10.632151 5.996574-14.46955l223.019353-223.029586c7.992021-7.992021 20.957311-7.992021 28.949332 0 7.992021 8.002254 7.992021 20.957311 0 28.949332l-188.073446 188.073446 604.753497 0C865.521592 475.058646 874.690416 484.217237 874.690416 495.52477z">
                </path>
            </svg>
            <span>Back</span>
        </button>
        <div class="ass-h">
            <p>{{ Associationdata.owner_details?.name }} - {{ Associationdata.resident_type }}</p>
        </div>

    </div>
    <div class="bg-white sec-cont">
        <!-- Header -->
        <div class="header-cont">
            <div class="user-info">
                <h5 class="label">Name</h5>
                <p>{{ Associationdata.owner_details?.name }}</p>
            </div>
            <div class="user-info">
                <h5 class="label">Email</h5>
                <p>{{ Associationdata.owner_details?.email }}</p>
            </div>
            <div class="user-info">
                <h5 class="label">Phone</h5>
                <p>{{ Associationdata.owner_details?.mobile }}</p>
            </div>
            <div class="user-info">
                <h5 class="label">Resident Type</h5>
                <p>{{ Associationdata.resident_type }}</p>
            </div>
            <div class="user-info">
                <h5 class="label">Owned At</h5>
                <p>{{ Associationdata.owner_details?.onboarded_time?.$date | date:'dd-MMM-yyyy' }}</p>
            </div>


        </div>

        <!-- Section Content -->
        <div class="main-cont">
            <div class="tabs">
                <button class="tab-btn" [class.active]="activeTab === 'Property'" (click)="setTab('Property')">
                    Property
                </button>
                <button class="tab-btn" [class.active]="activeTab === 'petvehicle'" (click)="setTab('petvehicle')">
                    Pet & Vehicle
                </button>
                <button class="tab-btn" [class.active]="activeTab === 'Access'" (click)="setTab('Access')">
                    Access
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <div *ngIf="activeTab === 'Property'">
                    <div class="resident-section">
                        <h4 class="section-title">Property Details</h4>
                        <div class="resident-card">
                            <div class="card-header">
                                <h5>Property Details</h5>
                                <!-- <button class="btn-add" (click)="addproperty()">+ Add Property</button> -->
                            </div>

                            <div class="card-body">
                                <div class="user-info">
                                    <h5 class="label">Propety No</h5>
                                    <p>{{ Associationdata.property_no }}</p>
                                </div>
                                <div class="user-info">
                                    <h5 class="label">Property Type</h5>
                                    <p>{{ Associationdata.property_type }}</p>
                                </div>
                                <div class="user-info">
                                    <h5 class="label">Area</h5>
                                    <p>{{ Associationdata.area }} sq.ft</p>
                                </div>
                                <div class="user-info">
                                    <h5 class="label">Facing</h5>
                                    <p>{{ Associationdata.facing }}</p>
                                </div>
                                <div class="user-info">
                                    <h5 class="label">Electricity Consumer No</h5>
                                    <p>{{ Associationdata.electricity_number }}</p>
                                </div>
                               <div class="user-info">
                <h5 class="label">Parking Slot Number</h5>
                <p>{{ Associationdata.parking_slot_number }}</p>
            </div>
            <div class="user-info">
                <h5 class="label">Gas Line Number</h5>
                <p>{{ Associationdata.gasline_number || '--'}}</p>
            </div>
                                <div class="user-info">
                                    <h5 class="label">BHK</h5>
                                    <p>{{ Associationdata.bhk }}</p>
                                </div>
                                <div class="user-info">
                                    <h5 class="label">Resident</h5>
                                    <p>{{ Associationdata.resident_type || '--' }}</p>
                                </div>
                                <div class="user-info">
                                    <h5 class="label">Maintenance Paid By</h5>
                                    <p>{{ Associationdata.maintenance_paid_by || 'Owner' }}</p>
                                </div>
                                <div class="user-info">
                                    <h5 class="label">Maintenance Amount</h5>
                                    <p>{{ Associationdata.maintenance_amount | currency:'INR' }}</p>
                                </div>
                                <div class="user-info">
                                    <h5 class="label">Due Date</h5>
                                    <p>{{ Associationdata.due_date }} of Month</p>
                                </div>
                                <div *ngIf="Associationdata.property_type === 'apartment'">
                                    <div class="user-info">
                                        <h5 class="label">Building Type</h5>
                                        <p>{{ Associationdata.property_no }}</p>
                                    </div>
                                    <div class="user-info">
                                        <h5 class="label">Tower Name</h5>
                                        <p>{{ Associationdata.property_no }}</p>
                                    </div>
                                    <div class="user-info">
                                        <h5 class="label">Block Name</h5>
                                        <p>{{ Associationdata.property_no }}</p>
                                    </div>
                                    <div class="user-info">
                                        <h5 class="label">Floor</h5>
                                        <p>{{ Associationdata.property_no }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="resident-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5>Tenant Details</h5>
                                <div class="d-flex gap-3">
                                    <button class="btn-add" (click)="addTenant(PropertyId)"
                                        *ngIf="!Associationdata.tenant_details?._id">+ Add Tenant</button>
                                    <button class="btn-add" (click)="RemoveTenant(PropertyId)"
                                        *ngIf="Associationdata.tenant_details?._id">Remove Tenant</button>
                                    <button class="btn-add" (click)="EditTenant(Associationdata)"
                                        *ngIf="Associationdata.tenant_details?._id">Edit Tenant</button>
                                </div>
                            </div>

                            <div class="card-body" *ngIf="Associationdata.tenant_details?._id; else nodatatenant">
                                <ng-container *ngFor="let field of [
          {label: 'Tenant Name', value: Associationdata.tenant_details?.name},
          {label: 'Phone Number', value: Associationdata.tenant_details?.mobile},
          {label: 'Email', value: Associationdata.tenant_details?.email},
          {label: 'Advance Paid', value: Associationdata.advance_amount},
          {label: 'Estimated Rent', value: Associationdata?.monthly_rent_amount},
          {label: 'Maintenance Amount', value: Associationdata?.maintenance_amount},
          {label: 'Maintenance Paid By', value: Associationdata?.maintenance_paid_by},
          {label: 'Rented At', value: Associationdata.tenant_details?.onboarded_time?.$date | date:'dd-MMM-yyyy'}
        ]">
                                    <div class="user-info">
                                        <h5 class="label">{{field.label}}</h5>
                                        <p>{{field.value}}</p>
                                    </div>
                                </ng-container>
                            </div>
                            <ng-template #nodatatenant>
                                <div class="card-body">
                                    No data found
                                </div>
                            </ng-template>
                        </div>
                    </div>

                </div>
                <div *ngIf="activeTab === 'petvehicle'" class="resident-section">
                    <h4 class="section-title">Pet & Vehicle</h4>

                    <!-- Pet Card -->
                    <div class="resident-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5>Pet Details</h5>
                            <button class="btn-add" (click)="addpet(Associationdata._id)"
                                *ngIf="!Associationdata.pet || Associationdata.pet.length === 0">Add Pet</button>
                                <button class="btn-add" (click)="EditPet(Associationdata.pet[0], PropertyId)"
                                *ngIf="Associationdata.pet && Associationdata.pet.length > 0">
                                Edit Pet
                            </button>
                        </div>

                        <div class="card-body" *ngIf="Associationdata.pet?.length > 0; else nodata">
                            <ng-container *ngFor="let field of [
                                    {label: 'Pet Name', value: Associationdata.pet[0]?.pet_name},
                                    {label: 'Pet Type', value: Associationdata.pet[0]?.type},
                                    {label: 'Pet Breed', value: Associationdata.pet[0]?.breed},
                                    {label: 'Age', value: Associationdata.pet[0]?.age},
                                    {label: 'Pet Owned By', value: Associationdata.pet[0]?.pet_owned_by}
                                ]">
                                <div class="user-info">
                                    <h5 class="label">{{ field.label }}</h5>
                                    <p>{{ field.value }}</p>
                                </div>
                            </ng-container>
                        </div>

                        <ng-template #nodata>
                            <div class="card-body">
                                No data found
                            </div>
                        </ng-template>

                    </div>

                    <!-- Vehicle Card -->
                    <div class="resident-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5>Vehicle Details</h5>
                            <button class="btn-add" (click)="addVehicle(Associationdata._id)"
                                *ngIf="!Associationdata.vehicle || Associationdata.vehicle.length === 0">+ Add
                                Vehicle</button>
                                 <button class="btn-add" (click)="EditVehicle(Associationdata.vehicle[0], PropertyId)"
                                *ngIf="Associationdata.vehicle && Associationdata.vehicle.length > 0">
                                Edit vehicle
                            </button>
                        </div>

                        <div class="card-body" *ngIf="Associationdata.vehicle?.length > 0; else nodatavehicle">
                            <ng-container *ngFor="let field of [
          {label: 'Vehicle Type', value: Associationdata.vehicle[0]?.type},
          {label: 'Brand', value: Associationdata.vehicle[0]?.brand},
          {label: 'Vehicle Model', value: Associationdata.vehicle[0]?.modal},
          {label: 'Vehicle Number', value: Associationdata.vehicle[0]?.number},
          {label: 'Vehicle Owned By', value: Associationdata.vehicle[0]?.vehicle_owned_by}
        ]">
                                <div class="user-info">
                                    <h5 class="label">{{field.label}}</h5>
                                    <p>{{field.value}}</p>
                                </div>
                            </ng-container>
                        </div>
                        <ng-template #nodatavehicle>
                            <div class="card-body">
                                No data found
                            </div>
                        </ng-template>
                    </div>
                </div>
                <div *ngIf="activeTab === 'Access'">
                    <div class="resident-section">
                        <h4 class="section-title">Access Management</h4>

                        <!-- Onboarding Access Card -->
                        <div class="resident-card">
                            <div class="card-header">
                                <h5>Onboarding Access</h5>
                                <div class="d-flex gap-3">
                                    <button class="btn-add" (click)="grantFullAccess('onboarding')">Give Full
                                        Access</button>
                                    <button class="btn-add" (click)="grantFullAccess('onboarding')">Update
                                        Access</button>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="permission-group">
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.tenant.create" />
                                        <span>Tenant Create</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.tenant.list" />
                                        <span>Tenant List</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.tenant.update" />
                                        <span>Tenant Update</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.tenant.delete" />
                                        <span>Tenant Delete</span>
                                    </label>

                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.pet.create" />
                                        <span>Pet Create</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.pet.list" />
                                        <span>Pet List</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.pet.update" />
                                        <span>Pet Update</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.pet.delete" />
                                        <span>Pet Delete</span>
                                    </label>

                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.vehicle.create" />
                                        <span>Vehicle Create</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.vehicle.list" />
                                        <span>Vehicle List</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.vehicle.update" />
                                        <span>Vehicle Update</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.vehicle.delete" />
                                        <span>Vehicle Delete</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Rent Invoice Card -->
                        <div class="resident-card">
                            <div class="card-header">
                                <h5>Rent Invoice</h5>
                                <div class="d-flex gap-3">
                                    <button class="btn-add" (click)="grantFullAccess('invoice')">Give Full
                                        Access</button>
                                    <button class="btn-add" (click)="grantFullAccess('onboarding')">Update
                                        Access</button>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="permission-group">
                                    <label class="permission-item">
                                        <input type="checkbox" [(ngModel)]="permissions.invoice.create" />
                                        <span>Rent Invoice Create</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>
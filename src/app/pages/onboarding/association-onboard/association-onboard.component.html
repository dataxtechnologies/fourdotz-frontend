<div class="onboarding-container">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="get-started">
            <span class="icon">i</span>
            Get started by setting up your workspace and Association details.
        </div>

        <!-- Step List -->
        <div class="steps-container">
            <div *ngFor="let step of steps; let i = index" class="step-item" [class.complete]="step.isComplete"
                [class.active]="step.isActive">

                <div class="icon-circle">
                    <ng-container *ngIf="step.isComplete">
                        <i class="fa fa-check"></i>
                    </ng-container>
                    <ng-container *ngIf="!step.isComplete && !step.isActive">
                        <i class="fa fa-circle"></i>
                    </ng-container>
                    <ng-container *ngIf="step.isActive">
                        <i class="fa fa-play"></i>
                    </ng-container>
                </div>

                <div class="step-content">
                    <div class="step-title">{{ step.title }}</div>
                    <div class="step-subtitle">{{ step.subtitle }}</div>
                </div>
            </div>
        </div>

        <!-- Logout Button -->
        <div class="logout-container">
            <button class="btn-remove12" (click)="logout()">
                <i class="fa fa-sign-out"></i> Logout
            </button>
        </div>
    </div>



    <!-- Main Content -->
    <div class="main-content">
        <div class="step-header">
            <div class="step-label">STEP {{ currentStep }} OF {{ steps.length }}</div>
            <h2 *ngIf="currentStep === 1">Enter Your Association Details</h2>
            <h2 *ngIf="currentStep === 2">Upload Required Documents</h2>
            <h2 *ngIf="currentStep === 3">Review and Submit</h2>

            <p class="step-description">
                <ng-container *ngIf="currentStep === 1">Fill out the basic and registration information for your
                    Association.</ng-container>
                <ng-container *ngIf="currentStep === 2">Please upload clear copies of all required documents to verify
                    your profile.</ng-container>
                <ng-container *ngIf="currentStep === 3">Confirm all details are correct before finalizing your
                    onboarding.</ng-container>
            </p>


        </div>

        <!-- Step 1 -->
        <div *ngIf="currentStep === 1" class="form-section">
            <form [formGroup]="inputForm" (ngSubmit)="goToNextStep()">
                <div class="form-group">
                    <label for="alternate_number">Alternate Contact Number <span class="required">*</span></label>
                    <input id="alternate_number" type="tel" formControlName="alternate_number" class="inp-cus"
                        placeholder="e.g., +91 98765 43210">
                    <div *ngIf="inputForm.get('alternate_number')?.invalid && inputForm.get('alternate_number')?.touched"
                        class="error">
                        A valid phone number is required.
                    </div>
                </div>

                <div class="form-group">
                    <label for="gst_number">GST Number <span class="required">*</span></label>
                    <input id="gst_number" type="text" formControlName="gst_number" class="inp-cus"
                        placeholder="15-digit GSTIN">
                    <div *ngIf="inputForm.get('gst_number')?.invalid && inputForm.get('gst_number')?.touched"
                        class="error">
                        GST Number is required.
                    </div>
                </div>

                <div class="form-group">
                    <label for="registration_number">Association Registration Number <span
                            class="required">*</span></label>
                    <input id="registration_number" type="text" placeholder="Enter Association Registration Number"
                        formControlName="registration_number" class="inp-cus">
                </div>

                <div class="form-group">
                    <label for="address">Full Registered Address <span class="required">*</span></label>
                    <textarea id="address" formControlName="address" class="inp-cus"
                        placeholder="Enter Full Address"></textarea>
                </div>

                <div class="form-navigation">
                    <button type="submit" [disabled]="inputForm.invalid" class="btn-add">Save and continue</button>
                </div>
            </form>
        </div>

        <!-- Step 2 -->
        <div *ngIf="currentStep === 2" class="form-section">
            <form [formGroup]="documentForm" (ngSubmit)="goToNextStep()">
                <div class="form-group">
                    <label for="company_proof_type">Select Company Proof Type</label>
                    <select id="company_proof_type" formControlName="company_proof_type" class="inp-cus">
                        <option value="">Choose Type</option>
                        <option value="incorporation_certificate">Certificate of Incorporation</option>
                        <option value="moa_aoa">Memorandum of Association (MOA)</option>
                        <option value="partnership_deed">Partnership Deed</option>
                    </select>
                </div>

                <h4>Documents</h4>
                <div class="document-uploads">
                    <div *ngFor="let doc of ['passport_size_photo','rental_agreement','cancelled_cheque_leaf','pan_card','company_proof']"
                        class="file-upload-item">
                        <label>{{ doc.replace('_',' ') | titlecase }}</label>
                        <input type="file" class="inp-cus" (change)="onFileChange($event, doc)" accept="image/*,.pdf">
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="button" (click)="goToPreviousStep()" class="btn secondary">← Back</button>
                    <button type="submit" [disabled]="!isDocumentsValid()" class="btn-add">Save and
                        continue</button>
                </div>
            </form>
        </div>

        <!-- Step 3 -->
        <div *ngIf="currentStep === 3" class="form-section">
            <p class="guidance-text">
                Please review the information below for accuracy. Once you submit, these details will be sent for
                verification.
            </p>

            <div class="review-block">
                <h3>Company Details</h3>
                <p><strong>Alternate Contact Number:</strong> {{ inputForm.get('alternate_number')?.value }}</p>
                <p><strong>GST Number:</strong> {{ inputForm.get('gst_number')?.value }}</p>
                <p><strong>Association Registration Number:</strong> {{ inputForm.get('registration_number')?.value }}
                </p>
                <p><strong>Address:</strong> {{ inputForm.get('address')?.value }}</p>
            </div>

            <div class="review-block">
                <h3>Uploaded Documents</h3>
                <!-- <ul> -->
                <p *ngFor="let key of (uploadedFiles | keyvalue)">
                    {{ key.key.replace('_',' ') | titlecase }}:
                    <strong>{{ key.value ? 'Uploaded' : 'Missing' }}</strong>
                </p>
                <!-- </ul> -->
            </div>

            <div class="form-navigation">
                <button type="button" (click)="goToPreviousStep()" class="btn secondary">← Back</button>
                <button type="button" (click)="submitInputForm()" class="btn-add">Submit Onboarding</button>
            </div>
        </div>
    </div>
</div>
<div class="onboarding-container">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="get-started">
            <span class="icon">i</span>
            Get started by setting up your workspace and Association details.
        </div>

        <div class="steps-container">
            <div *ngFor="let step of steps; let i = index" class="step-item" [class.complete]="step.isComplete"
                [class.active]="step.isActive">
                <div class="icon-circle">
                    <ng-container *ngIf="step.isComplete">
                        <i class="fa fa-check"></i>
                    </ng-container>
                    <ng-container *ngIf="!step.isComplete && !step.isActive">
                        <i class="fa fa-circle"></i>
                    </ng-container>
                    <ng-container *ngIf="step.isActive">
                        <i class="fa fa-play"></i>
                    </ng-container>
                </div>

                <div class="step-content">
                    <div class="step-title">{{ step.title }}</div>
                    <div class="step-subtitle">{{ step.subtitle }}</div>
                </div>
            </div>
        </div>

        <div class="logout-container">
            <button class="btn-remove12" (click)="logout()">
                <i class="fa fa-sign-out"></i> Logout
            </button>
            <button class="btn-remove22 " *ngIf="">
                <i class="fa fa-sign-out"></i> Logging Out...
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="step-header">
            <div class="step-label">STEP {{ currentStep }} OF {{ steps.length }}</div>

            <h2 *ngIf="currentStep === 1">Enter Your Association Details</h2>
            <h2 *ngIf="currentStep === 2">Upload Required Documents</h2>
            <h2 *ngIf="currentStep === 3">Enter Bank Account Details</h2>
            <h2 *ngIf="currentStep === 4">Review and Submit</h2>

            <p class="step-description">
                <ng-container *ngIf="currentStep === 1">
                    Fill out the basic and registration information for your Association.
                </ng-container>
                <ng-container *ngIf="currentStep === 2">
                    Please upload clear copies of all required documents to verify your profile.
                </ng-container>
                <ng-container *ngIf="currentStep === 3">
                    Provide your bank account details for payment settlements.
                </ng-container>
                <ng-container *ngIf="currentStep === 4">
                    Confirm all details are correct before finalizing your onboarding.
                </ng-container>
            </p>
        </div>

        <!-- Step 1 -->
        <div *ngIf="currentStep === 1" class="form-section">
            <form [formGroup]="inputForm" (ngSubmit)="goToNextStep()">
                <div class="form-group">
                    <label>Alternate Contact Number <span class="required">*</span></label>
                    <input type="tel" formControlName="alternate_number" class="inp-cus"
                        placeholder="e.g., +91 98765 43210" maxlength="10" />
                    <div *ngIf="
              inputForm.get('alternate_number')?.invalid &&
              inputForm.get('alternate_number')?.touched
            " class="error">
                        A valid phone number is required.
                    </div>
                </div>

                <div class="form-group">
                    <label>GST Number <span class="required">*</span></label>
                    <input type="text" formControlName="gst_number" class="inp-cus" placeholder="15-digit GSTIN" />
                    <div *ngIf="
              inputForm.get('gst_number')?.invalid &&
              inputForm.get('gst_number')?.touched
            " class="error">
                        GST Number is required.
                    </div>
                </div>

                <div class="form-group">
                    <label>Association Registration Number <span class="required">*</span></label>
                    <input type="text" formControlName="registration_number" class="inp-cus"
                        placeholder="Enter Association Registration Number" />
                    <div *ngIf="
              inputForm.get('registration_number')?.invalid &&
              inputForm.get('registration_number')?.touched
            " class="error">
                        Registration Number is required.
                    </div>
                </div>

                <div class="form-group">
                    <label>Full Registered Address <span class="required">*</span></label>
                    <textarea formControlName="address" class="inp-cus" placeholder="Enter Full Address"></textarea>
                    <div *ngIf="
              inputForm.get('address')?.invalid &&
              inputForm.get('address')?.touched
            " class="error">
                        Address is required.
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="submit" [disabled]="inputForm.invalid" class="btn-add">
                        Save and continue
                    </button>
                </div>
            </form>
        </div>

        <!-- Step 2 -->
        <div *ngIf="currentStep === 2" class="form-section">
            <div class="info-box">
                <div class="info-icon">⚠️</div>
                <div class="info-content">
                    <div class="info-title">Complete All Fields</div>
                    <div class="info-text">
                        Please fill in all the required fields and upload all the necessary documents before proceeding
                        to the next step.
                    </div>
                </div>
            </div>
            <form [formGroup]="documentForm" (ngSubmit)="goToNextStep()">
                <div class="form-group">
                    <label for="company_proof_type">Select Company Proof Type <span class="required">*</span></label>
                    <select id="company_proof_type" formControlName="company_proof_type" class="inp-cus">
                        <option value="">Choose Type</option>
                        <option value="incorporation_certificate">Certificate of Incorporation</option>
                        <option value="moa_aoa">Memorandum of Association (MOA)</option>
                        <option value="partnership_deed">Partnership Deed</option>
                    </select>
                </div>

                <h4>Documents <span class="required">*</span></h4>
                <!-- <div class="document-uploads">
                    <div *ngFor="
              let doc of [
                'passport_size_photo',
                'rental_agreement',
                'cancelled_cheque_leaf',
                'pan_card',
                'company_proof'
              ]
            " class="file-upload-item"> -->
                <!-- <label>{{ doc.replace('_', ' ') | titlecase }}</label>
                        <input type="file" class="inp-cus" (change)="onFileChange($event)" accept="image/*,.pdf" /> -->
                <div class="document-uploads">


                    <div class="form-group">
                        <label for="Passport">Passport Size Photo</label>
                        <input type="file" class="inp-cus" (change)="onFilePassportChange($event)"
                            accept="image/*,.pdf" />
                    </div>
                    <div class="form-group">
                        <label for="Passport">Rental Agreement</label>
                        <input type="file" class="inp-cus" (change)="onFileRentalChange($event)"
                            accept="image/*,.pdf" />
                    </div>
                    <div class="form-group">
                        <label for="Passport">Cancelled Cheque Leaf</label>
                        <input type="file" class="inp-cus" (change)="onFileChequeChange($event)"
                            accept="image/*,.pdf" />
                    </div>
                    <div class="form-group">
                        <label for="Passport">Pan Card</label>
                        <input type="file" class="inp-cus" (change)="onFilePanChange($event)" accept="image/*,.pdf" />
                    </div>
                    <div class="form-group">
                        <label for="Passport">Company Proof</label>
                        <input type="file" class="inp-cus" (change)="onFileCompanyChange($event)"
                            accept="image/*,.pdf" />
                    </div>
                </div>
                <!-- </div> -->

                <div class="form-navigation">
                    <button type="button" (click)="goToPreviousStep()" class="btn secondary">← Back</button>
                    <button type="submit" [disabled]="!isDocumentsValid()" class="btn-add">
                        Save and continue
                    </button>
                    <!-- <button type="button" (click)="submitDocumentForm()" class="btn-add">
                        submitDocumentForm
                    </button> -->
                </div>
            </form>
        </div>

        <!-- Step 3: Account Details -->
        <div *ngIf="currentStep === 3" class="form-section">
            <form [formGroup]="accountForm" (ngSubmit)="goToNextStep()">
                <div class="form-group">
                    <label>Account Holder Name <span class="required">*</span></label>
                    <input type="text" formControlName="account_holder_name" class="inp-cus"
                        placeholder="Enter Account Holder Name" />
                    <div *ngIf="
              accountForm.get('account_holder_name')?.invalid &&
              accountForm.get('account_holder_name')?.touched" class="error">
                        Account Holder Name is required.
                    </div>
                </div>

                <div class="form-group">
                    <label>Account Number <span class="required">*</span></label>
                    <input type="text" formControlName="account_number" class="inp-cus"
                        placeholder="Enter Account Number" />
                    <div *ngIf="
              accountForm.get('account_number')?.invalid &&
              accountForm.get('account_number')?.touched
            " class="error">
                        Account Number is required.
                    </div>
                </div>

                <div class="form-group">
                    <label>Account Type <span class="required">*</span></label>
                    <select formControlName="account_type" class="inp-cus">
                        <option value="">Select Account Type</option>
                        <option value="savings">Savings</option>
                        <option value="current">Current</option>
                    </select>
                    <div *ngIf="
              accountForm.get('account_type')?.invalid &&
              accountForm.get('account_type')?.touched
            " class="error">
                        Account Type is required.
                    </div>
                </div>

                <div class="form-group">
                    <label>IFSC Code <span class="required">*</span></label>
                    <input type="text" formControlName="ifsc_code" class="inp-cus" placeholder="Enter IFSC Code" />
                    <div *ngIf="
              accountForm.get('ifsc_code')?.invalid &&
              accountForm.get('ifsc_code')?.touched
            " class="error">
                        IFSC Code is required.
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="button" (click)="goToPreviousStep()" class="btn secondary">← Back</button>
                    <button type="submit" [disabled]="accountForm.invalid" class="btn-add">
                        Save and continue
                    </button>
                </div>
            </form>
        </div>

        <!-- Step 4: Review & Submit -->
        <div *ngIf="currentStep === 4" class="form-section">
            <p class="guidance-text">
                Please review the information below for accuracy. Once you submit, these details will be sent for
                verification.
            </p>

            <div class="review-block">
                <h3>Association Details</h3>
                <p><strong>Alternate Contact:</strong> {{ inputForm.value.alternate_number }}</p>
                <p><strong>GST:</strong> {{ inputForm.value.gst_number }}</p>
                <p><strong>Reg. No:</strong> {{ inputForm.value.registration_number }}</p>
                <p><strong>Address:</strong> {{ inputForm.value.address }}</p>
            </div>

            <div class="review-block">
                <h3>Account Details</h3>
                <p><strong>Holder Name:</strong> {{ accountForm.value.account_holder_name }}</p>
                <p><strong>Account No:</strong> {{ accountForm.value.account_number }}</p>
                <p><strong>Type:</strong> {{ accountForm.value.account_type }}</p>
                <p><strong>IFSC:</strong> {{ accountForm.value.ifsc_code }}</p>
            </div>

            <div class="review-block">
                <h3>Uploaded Documents</h3>
                <p>
                    Passport Size Photo:
                    <strong>{{ passport_sizephoto ? passport_sizephoto.name : 'Missing' }}</strong>
                </p>
                <p>
                    Rental Agreement:
                    <strong>{{ RentalAggrement ? RentalAggrement.name : 'Missing' }}</strong>
                </p>
                <p>
                    Cancelled Cheque Leaf:
                    <strong>{{ ChequeLeaf ? ChequeLeaf.name : 'Missing' }}</strong>
                </p>
                <p>
                    PAN Card:
                    <strong>{{ Pancard ? Pancard.name : 'Missing' }}</strong>
                </p>
                <p>
                    Company Proof:
                    <strong>{{ Company_proof ? Company_proof.name : 'Missing' }}</strong>
                </p>
            </div>

            <div class="form-navigation">
                <button type="button" (click)="goToPreviousStep()" class="btn secondary">← Back</button>
                <button type="button" (click)="submitInputForm()" class="btn-add">Submit Onboarding</button>
            </div>
        </div>
    </div>
</div>